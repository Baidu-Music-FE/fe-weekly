<!DOCTYPE html>
<html>
<head>
	<script src="/assets/markdown/sh/shCore.js"></script>
	<script src="/assets/markdown/sh/brushes.js"></script>
	<link rel="stylesheet" href="/assets/markdown/sh/shCoreDefault.css">

	<link rel="stylesheet" href="/assets/markdown/default.css">
	<title>Nobone Documentation</title>
</head>
<body>

<div id="main">
	<style type="text/css">
    img {
        max-width: 600px;
    }
</style>

<h2 id="devtools-">DevTools 里你可能没注意到的功能</h2>
<p>碰到一个工具，先浏览一下官方文档是个好习惯。一上来就用，碰到问题再看文档是大多数人的习惯，但这常常会让你漏掉很多有趣的东西。其实快速浏览不会费时，这里是 DevTools 的文档：<a href="https://developer.chrome.com/devtools/index">链接</a>。
如果你想看原版，可以略过此文，去官方看，你肯定会有收获。</p>
<p><strong>这里主要列出一些我觉得非常常用的功能。</strong></p>
<ul>
<li><h3 id="-ctrl-cmd-shift-c-"><code>Ctrl(Cmd) + Shift + C</code> 快速开启或关闭 <strong>审查模式</strong></h3>
<p>推荐尽量使用这个功能，而不是用鼠标右键开启审查功能，因为很多时候 鼠标 的事件会影响页面交互，而通过这几个按键影响页面交互的可能性很低。</p>
</li>
<li><h3 id="-js-">冻结 js 线程</h3>
<p><img src="img/[2014.07.20]/freeze_js.gif" alt="freeze_js"></p>
<p>你可能会碰到这样的情况。你需要 审查 某个只有当鼠标 hover 时才会显示的元素。这时你发现通过用鼠标或者 <code>Ctrl(Cmd) + Shift + C</code> 审查都行不通。
这时只需要冻结页面 js 线程即可：</p>
<ul>
<li>选中 <strong>源码栏</strong></li>
<li>用鼠标触发想要的 UI 交互</li>
<li>Windows 按 <code>F8</code>，Mac 按 <code>fn + F8</code>，冻结 js 线程</li>
<li>然后就可以用 <code>放大镜</code> 按钮或者 <code>Ctrl(Cmd) + Shift + C</code> 来审查元素了。</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><h3 id="-ctrl-cmd-o-">快捷键 <code>Ctrl(Cmd) + O</code></h3>
<p><img src="img/[2014.07.20]/sources_basefind.jpg" alt="sources_basefind"></p>
<p>和 Sublime Text 类似的一个功能，快速搜索打开文件。比如用它快速打开 <strong>资源</strong> 面板里的 CSS，JS，Snippet。</p>
</li>
</ul>
<hr>
<ul>
<li><h3 id="-ctrl-cmd-shift-o-">快捷键 <code>Ctrl(Cmd) + Shift + O</code></h3>
<p>上一个功能的变种，在文件里搜索 JS 函数或 CSS 选择器</p>
</li>
</ul>
<hr>
<ul>
<li><h3 id="js-snippet-">JS Snippet 功能</h3>
<p><img src="img/[2014.07.20]/snippets_run.png" alt="snippets_run"></p>
<p>这个功能相当好用，你可以保存一些 JS 代码片段，这个片断会在所有页面的 DevTools 间共享。
只要不删除它们，就会一直存在。随时可以右键运行片断。常常会用于保存通用的调试代码。</p>
<p>你甚至能选中一个 snippet 中的某一行在 console 里运行。</p>
</li>
</ul>
<hr>
<ul>
<li><h3 id="console-">Console 的 过滤</h3>
<p><img src="img/[2014.07.20]/filter-errors.png" alt="filter-errors"></p>
<p>比如你有个 mousemove 的事件需要 debug，你可能会 log 大量的数据，这很可能会干扰你的调试，这时用过滤会是不错的选择，比如我只想要输出里含有数值的结果，我们可以利用 正则 <code>\d+</code> 。</p>
</li>
</ul>
<hr>
<ul>
<li><h3 id="-debugger-">利用 <code>debugger</code> 断点调试</h3>
<p><img src="img/[2014.07.20]/debugger.png" alt="debugger"></p>
<p>这个是 v8 提供的接口，也就是说 Node 里也能用。v8 在调试模式下运行到这个 关键词 会在此处打断程序，等待 resume。</p>
</li>
</ul>
<hr>
<ul>
<li><h3 id="-"><code>$</code> 和 <code>$$</code> 选择器</h3>
<p><img src="img/[2014.07.20]/select-login-btn.png" alt="select-login-btn"></p>
<p>事实上不用引入 jquery，DevTools 也能使用类似 <code>$</code> 的函数。区别在于 <code>$</code> 返回的是一个 DOM Element，<code>$$</code> 返回的是 Element 数组。</p>
</li>
</ul>
<hr>
<ul>
<li><h3 id="-0-1-3-"><code>$0</code>, <code>$1</code>, <code>$3</code>... 变量</h3>
<p><img src="img/[2014.07.20]/recent-selection.png" alt="recent-selection"></p>
<p>快速访问最近 <strong>审查</strong> 过的 DOM 对象。</p>
</li>
<li><h3 id="-">异步调试</h3>
<p><img src="img/[2014.07.20]/xhr-async.gif" alt="xhr-async"></p>
<p>这个功能能辅助调试异步代码，尤其是追踪异步调用栈，比如 ajax 请求。启动之后会自动追踪 <code>setInterval, setTimeout, XMLHttpRequest, promises, requestAnimationFrame, MutationObservers</code> 等函数的调用栈。</p>
<p>这里有篇详细介绍的文章：<a href="http://www.html5rocks.com/en/tutorials/developertools/async-call-stack/">链接</a></p>
</li>
</ul>

</div>

<div id="toc">
	<h1>Table of Contents</h1>
	<div class="content"></div>
</div>

<script type="text/javascript" src="/assets/markdown/main.js"></script>

<script type="text/javascript">
	[].slice.apply(document.querySelectorAll('pre code[class]')).forEach(function (el) {
		var lang = el.getAttribute('class').replace('lang-', '');
		el.parentElement.setAttribute('class', 'brush: ' + lang + ';');
		el.parentElement.innerHTML = el.innerHTML
	});
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>

</body>
</html>


<!-- Nobone Client Helper -->
<script type="text/javascript">

// Generated by CoffeeScript 1.8.0
var Nobone;

Nobone = (function() {
  function Nobone(opts) {
    'use strict';
    var init, init_auto_reload, self;
    self = this;
    self.lang_current = opts.lang_current;
    self.lang_data = opts.lang_data;
    init = function() {
      if (opts.auto_reload) {
        return init_auto_reload();
      }
    };
    self.log = function(msg, action) {
      var req;
      if (action == null) {
        action = 'log';
      }
      console[action](msg);
      req = new XMLHttpRequest;
      req.open('POST', '/nobone-log');
      req.setRequestHeader('Content-Type', 'application/json');
      return req.send(JSON.stringify(msg));
    };
    self.lang = function(cmd, lang) {
      var en, i, _ref;
      if (lang == null) {
        lang = opts.lang_current;
      }
      i = cmd.lastIndexOf('|');
      en = i > -1 ? cmd.slice(0, i) : cmd;
      return ((_ref = opts.lang_data[lang]) != null ? _ref[cmd] : void 0) || en;
    };
    init_auto_reload = function() {
      var es;
      es = new EventSource(opts.host + '/nobone-sse/auto_reload');
      es.addEventListener('error', function(e) {
        return console.warn(e.message);
      });
      return es.addEventListener('file_modified', function(e) {
        var each, msg, reload_elem;
        msg = JSON.parse(e.data);
        console.log(">> file_modified: " + msg.req_path);
        reload_elem = function(el, key) {
          var body;
          if (el[key].indexOf('?') === -1) {
            el[key] += '?nb_auto_reload=0';
          } else {
            if (el[key].indexOf('nb_auto_reload') > -1) {
              el[key] = el[key].replace(/nb_auto_reload=(\d+)/, function(m, p) {
                return 'nb_auto_reload=' + (+p + 1);
              });
            } else {
              el[key] += '&nb_auto_reload=0';
            }
          }
          body = document.body;
          body.style.display = 'none';
          body.offsetHeight;
          return setTimeout(function() {
            return body.style.display = 'block';
          }, 50);
        };
        each = function(qs, handler) {
          var elems;
          elems = document.querySelectorAll(qs);
          return [].slice.apply(elems).forEach(handler);
        };
        if (!msg.req_path) {
          location.reload();
          return;
        }
        switch (msg.ext_bin) {
          case '.js':
            return each('script', function(el) {
              if (el.src.indexOf(msg.req_path) > -1) {
                return location.reload();
              }
            });
          case '.css':
            return each('link', function(el) {
              if (el.href.indexOf(msg.req_path) > -1) {
                return reload_elem(el, 'href');
              }
            });
          case '.jpg':
          case '.gif':
          case '.png':
            return each('img', function(el) {
              if (el.src.indexOf(msg.req_path) > -1) {
                return reload_elem(el, 'src');
              }
            });
          default:
            return location.reload();
        }
      });
    };
    init();
  }

  return Nobone;

})();

window.nb = new Nobone({"auto_reload":true,"lang_current":"en","host":""});

</script>

