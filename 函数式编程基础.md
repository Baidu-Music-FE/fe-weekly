# 函数式编程基础

很多人都是先了解面对对象的编程之后才听闻了函数式编程。这其实很很奇怪，我们学习数学的时候基本就是用函数式思维在教学，比如数列的通项公式，代数微积分之类的。

面对对象的编程往往注重如何合理的用代码描述现实世界种的事物，这很顺其自然，人们通过构建类似现实的虚拟模型来解决抽象的问题，这样能帮助我们更快的熟悉要解决的问题。比如有个系统 S，我们通过调整 S 中某些对象的状态，系统中其他对象可能会对这些状态的变化做出反应，我们会关注 S 中某些感兴趣的状态。
这是面对对象的编程的好处也促成了坏处，我们需要维护复杂的状态，系统里的对象的状态可能会高度差异化。人的脑容量通常是有限的，对于一个有成千上万对象的系统，我们无法实时追踪每个对象的状态，如果某个对象的状态引起了整个系统的异常，问题往往会异常难以排查。

另外要测试一个面对对象的系统的某种状态是否在正常工作时，我们发现很难模拟出复杂状态，因为这个系统的某个状态通常是状态的时间积分的结果，而积分真的是个很令人讨厌的东西。

适当的使用函数式编程在一定层度上能缓解这些问题。函数式的核心在于“消除副作用”，也就是消除自己对外部的印象，换句话说，一个没有自我状态的东西很难对外部产生副作用。这也给测试来来了便利，由于系统没有状态，随时拿出一个函数就能测试，无需模拟任何运行时状态。

当然没副作用也是函数式不好的地方，就好比你有成千上万个函数，它们互不相关，突然要将它们组合起来解决一个问题，人的脑容量一样很难够用，很容易在过多的选择中迷失解决问题的方向。另外可以很容易想到，这种方法比面对对象更节省存储资源，但更耗费运算资源。另外很多问题你很难天才的将其转换为纯数学的输入输出问题。

现在更多的情况是面对对象的编程里混合少量使用函数式编程。

## 怎样才算没副作用？

简单点说就是不依赖任何有副作用的东西。比如不调用其他有状态的函数，不受当前程序状态的影响灯。比如我们常常认定对于 underscore 的依赖是无副作用的。
